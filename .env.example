# =====================================================
# ZAKAPP ENVIRONMENT CONFIGURATION
# =====================================================
# Copy this file to .env and fill in your values
# 
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults
# =====================================================

# =====================================================
# SECURITY SECRETS [REQUIRED]
# =====================================================
# Generate secure secrets using: openssl rand -base64 32

# JWT token signing key - used for user authentication
JWT_SECRET=your-jwt-secret-here-generate-with-openssl

# JWT refresh token signing key
JWT_REFRESH_SECRET=your-refresh-secret-here
REFRESH_SECRET=your-refresh-secret-here

# Data encryption key (AES-256) - used for encrypting sensitive user data
ENCRYPTION_KEY=your-encryption-key-here-32-bytes

# App secret for encrypting admin settings stored in database
APP_SECRET=your-app-secret-here-generate-with-openssl

# =====================================================
# ENVIRONMENT & MODE
# =====================================================
NODE_ENV=development  # development | production

# =====================================================
# URL CONFIGURATION
# =====================================================
# Public URL where the app is accessible (used for email links, redirects)
APP_URL=http://localhost:3000

# API URL for the frontend to call backend
REACT_APP_API_BASE_URL=http://localhost:3001/api

# CouchDB URL for sync (external URL for frontend)
REACT_APP_COUCHDB_URL=http://localhost:5984

# =====================================================
# PORT CONFIGURATION
# =====================================================
# External ports (what you access from browser/host)
FRONTEND_PORT=3000
BACKEND_PORT=3001
COUCHDB_PORT=5984
COUCHDB_HTTPS_PORT=6984

# Internal ports (inside Docker containers - usually don't change)
FRONTEND_INTERNAL_PORT=3000
BACKEND_INTERNAL_PORT=3001
COUCHDB_INTERNAL_PORT=5984

# =====================================================
# CORS CONFIGURATION
# =====================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
ALLOWED_HOSTS=localhost

# =====================================================
# COUCHDB DATABASE [REQUIRED]
# =====================================================
COUCHDB_USER=admin
COUCHDB_PASSWORD=your-couchdb-password-here

# Internal URL for backend to reach CouchDB (Docker network)
COUCHDB_URL=http://couchdb:5984

# JWT secret for CouchDB authentication (can be same as JWT_SECRET)
COUCHDB_JWT_SECRET=your-couchdb-jwt-secret-here

# =====================================================
# EMAIL CONFIGURATION (Choose ONE method)
# =====================================================
# Option 1: SMTP (Recommended for self-hosting)
# =====================================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false                 # true for port 465, false for 587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=ZakApp

# =====================================================
# Option 2: Resend API (Alternative to SMTP)
# =====================================================
# Get your API key from https://resend.com
# RESEND_API_KEY=re_xxxxxxxxxxxxx

# =====================================================
# ADMIN ACCESS
# =====================================================
# Comma-separated list of email addresses with admin access
ADMIN_EMAILS=admin@yourdomain.com

# =====================================================
# USER LIMITS (Defaults)
# =====================================================
# These are system-wide defaults for new users
# Admins can override per-user in the Admin Dashboard
DEFAULT_MAX_ASSETS=30
DEFAULT_MAX_NISAB_RECORDS=5
DEFAULT_MAX_PAYMENTS=50
DEFAULT_MAX_LIABILITIES=15

# =====================================================
# PRECIOUS METALS API
# =====================================================
# Get your key from https://www.goldapi.io/ (Free Tier available)
GOLD_API_KEY=

# Fallback prices if API is unavailable (USD per gram)
# Get current prices from: https://www.livepriceofgold.com/
MANUAL_GOLD_PRICE_USD=
MANUAL_SILVER_PRICE_USD=

# =====================================================
# FEEDBACK & SUPPORT
# =====================================================
REACT_APP_FEEDBACK_ENABLED=true
VITE_FEEDBACK_ENABLED=true
VITE_FEEDBACK_EMAIL=support@yourdomain.com

# Discord/Slack webhook for feedback notifications (optional)
# REACT_APP_FEEDBACK_WEBHOOK_URL=https://discord.com/api/webhooks/...

# =====================================================
# MAINTENANCE MODE
# =====================================================
MAINTENANCE_ENABLED=false

# =====================================================
# TEST CREDENTIALS (for running test suites)
# =====================================================
# These are used for integration and contract tests
# Do NOT use production credentials here
TEST_USER_EMAIL=test@example.local
TEST_USER_PASSWORD=TestPass123!

# =====================================================
# PRODUCTION DEPLOYMENT EXAMPLE
# =====================================================
# For production with custom domain and Cloudflare Tunnel:
#
# APP_URL=https://app.yourdomain.com
# REACT_APP_API_BASE_URL=https://api.yourdomain.com/api
# REACT_APP_COUCHDB_URL=https://syncdb.yourdomain.com
# ALLOWED_ORIGINS=https://app.yourdomain.com,https://api.yourdomain.com,https://syncdb.yourdomain.com
# NODE_ENV=production
# =====================================================