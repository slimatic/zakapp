# Backend Server Environment Variables
# Copy this file to .env for local development: cp .env.example .env

# =====================================================
# SERVER CONFIGURATION
# =====================================================
NODE_ENV=development

# Backend server port
# Default: 3001
# Change this if port 3001 is already in use
# IMPORTANT: If you change this, update REACT_APP_API_BASE_URL in client/.env.local
PORT=3001

# Frontend URL for CORS
# Must match your frontend development server URL
# Default: http://localhost:3000
# If you change frontend port, update this (e.g., http://localhost:3010)
CLIENT_URL=http://localhost:3000

# =====================================================
# JWT CONFIGURATION
# =====================================================
# JWT secrets for access and refresh tokens
# Generate secure secrets: openssl rand -base64 32
# SECURITY: Change these in production!

# Primary JWT secret (legacy - kept for compatibility)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Access token secret (used by JWTService)
JWT_ACCESS_SECRET=your-super-secret-jwt-access-key-change-this-in-production

# Refresh token secret
JWT_REFRESH_SECRET=your-super-secret-jwt-refresh-key-change-this-in-production

# Token expiration times
JWT_EXPIRES_IN=7d
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRES_IN=30d
JWT_REFRESH_EXPIRY=7d

# =====================================================
# DATABASE CONFIGURATION
# =====================================================
# SQLite database connection URL
# For local development, this creates a SQLite database file
# Default: file:./data/dev.db
# 
# Examples:
#   SQLite (recommended for development): file:./data/dev.db
#   PostgreSQL: postgresql://user:password@localhost:5432/zakapp
#   MySQL: mysql://user:password@localhost:3306/zakapp
DATABASE_URL=file:./data/dev.db

# =====================================================
# DATA STORAGE
# =====================================================
# Directory for storing application data
DATA_DIR=./data

# =====================================================
# ENCRYPTION
# =====================================================
# 32-character encryption key for sensitive data
# Generate a secure key: node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
ENCRYPTION_KEY=your-32-character-encryption-key-here

# =====================================================
# SECURITY SETTINGS
# =====================================================
# BCrypt password hashing rounds (higher = more secure but slower)
# Recommended: 12-14 for production
BCRYPT_ROUNDS=12

# =====================================================
# PRECIOUS METALS API (Nisab Calculation)
# =====================================================
# API key for metals-api.com to fetch gold and silver spot prices
# Used for calculating Nisab thresholds in Islamic Zakat tracking
# 
# Sign up: https://metals-api.com/signup
# Free tier: 50 requests/month (sufficient with 24-hour caching)
# Pricing: https://metals-api.com/pricing
# 
# SECURITY: Keep this secret! Do not commit actual keys to version control
# 
# Example: METALS_API_KEY=abc123def456ghi789
METALS_API_KEY=your-metals-api-key-here

# =====================================================
# PORT CONFIGURATION GUIDE
# =====================================================
# If you need to change the backend port:
# 
# 1. Set PORT to your desired port (e.g., PORT=3081)
# 2. Update CLIENT_URL if frontend port changed
# 3. Update client/.env.local:
#    REACT_APP_API_BASE_URL=http://localhost:3081/api
# 4. Start servers:
#    - Backend: cd server && npm run dev
#    - Frontend: cd client && npm start
#
# Troubleshooting:
# - "Port already in use": Change PORT to a different number
# - "Failed to fetch": Ensure client's REACT_APP_API_BASE_URL matches this PORT
# - CORS errors: Ensure CLIENT_URL matches your frontend URL